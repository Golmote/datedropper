

	//////////////////////////////////////
	// DATEDROPPER Version 1			//
	// Last Updates: 15/02/2015			//
	//									//
	// Made with love by				//
	// Felice Gattuso					//
	//////////////////////////////////////


$.fn.dateDropper=function(a){if(this.is("input")&&"text"==this.attr("type")){var b=(new Date).getFullYear(),c=(new Date).getDate(),d=(new Date).getMonth(),e=$.extend({animate_current:!0,animation:"fadein",color:"#f87a54",format:"m/d/Y",lang:"en",lock:!1,maxYear:b,minYear:1970,placeholder:"Select date",years_multiple:!1},a),f=this,g=$(".dd_wrap").length+1,h=function(a){return!(a%4||!(a%100)&&a%400)},i=100,j=/^#[0-9A-F]{6}$/i.test(e.color),k=function(a){return a.toString().substr(0,3)+e.years_multiple},l=0;j||(e.color="#f87a54"),e.maxYear<b&&(b=e.maxYear),$('<div class="dd_wrap" id="dd_'+g+'"><div class="dd_overlay"></div><div class="dd_"></div></div>').appendTo("body");var m=$("#dd_"+g),n=m.find(".dd_"),o=m.find(".dd_overlay");$(window).on("resize",function(){n.css({top:f.offset().top+(f.height()+12),left:f.offset().left+(f.width()/2-i/2)-2})}),$("<style>#dd_"+g+" .dd_ .dd_submit,#dd_"+g+" .dd_ .dd_r_ ul li { background-color: "+e.color+"; } #dd_"+g+" .dd_ .dd_d_ .dd_sl_ ul li em , #dd_"+g+" .dd_ .dd_d_ .dd_sl_ ul li.dd_sunday{ color: "+e.color+"; }</style>").appendTo("head"),f.attr({readonly:"readonly"}).addClass("dd_locked").val(e.placeholder),n.append('<div class="dd_sw_ dd_m_"><a class="dd_nav_ dd_prev_"></a><a class="dd_nav_ dd_next_"></a><div class="dd_sl_"></div></div>'),n.append('<div class="dd_sw_ dd_d_"><a class="dd_nav_ dd_prev_"></a><a class="dd_nav_ dd_next_"></a><div class="dd_sl_"></div></div>'),n.append('<div class="dd_sw_ dd_y_"><a class="dd_nav_ dd_prev_"></a><a class="dd_nav_ dd_next_"></a><div class="dd_sl_"></div></div>'),e.years_multiple&&n.append('<div class="dd_r_"></div>'),n.append('<div class="dd_submit"></div>');var p=n.find(".dd_m_"),q=n.find(".dd_d_"),r=n.find(".dd_y_"),s=n.find(".dd_r_"),t=n.find(".dd_submit");switch(e.lang){case"si":var u=["januar","februar","marec","april","maj","junij","julij","avgust","september","oktober","november","december"],v=["nedelja","ponedeljek","torek","sreda","\u010detrtek","petek","sobota"];break;case"it":var u=["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],v=["Domenica","Luned\xec","Marted\xec","Mercoled\xec","Gioved\xec","Venerd\xec","Sabato"];break;case"hu":var u=["janu\xe1r","febru\xe1r","m\xe1rcius","\xe1prilis","m\xe1jus","j\xfanius","j\xfalius","augusztus","szeptember","okt\xf3ber","november","december"],v=["vas\xe1rnap","h\xe9tf\u0151","kedd","szerda","cs\xfct\xf6rt\xf6k","p\xe9ntek","szombat"];break;case"es":var u=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],v=["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","Samedi"];break;case"de":var u=["Januar","Februar","Marz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],v=["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"];break;case"fr":var u=["Janvier","F\xe9vrier","Mars","Avril","Mai","Juin","Juillet","Ao\xfbt","Septembre","Octobre","Novembre","D\xe9cembre"],v=["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"];break;case"pt":var u=["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],v=["Domingo","Segunda","Ter\xe7a","Quarta","Quinta","Sexta","S\xe1bado"];break;default:var u=["January","February","March","April","May","June","July","August","September","October","November","December"],v=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}p.find(".dd_sl_").append("<ul></ul>");for(var x,w=1;12>=w;w++)x=u[w-1].substr(0,3),p.find("ul").append('<li value="'+w+'">'+x+"</li>");q.find(".dd_sl_").append("<ul></ul>");for(var z,y=1;31>=y;y++)z=10>y?"0"+y:y,q.find("ul").append('<li value="'+y+'">'+z+"<em ></em></li>");r.find(".dd_sl_").append("<ul></ul>");for(var B,A=e.minYear;A<=e.maxYear;A++)B=h(A),r.find("ul").append('<li value="'+A+'" data-filter="'+B+'">'+A+"</li>");if(e.years_multiple){s.append("<ul></ul>");for(var C=e.minYear;C<=e.maxYear;C++){var D=C%e.years_multiple;0==D&&s.find("ul").append('<li value="'+C+'"></li>')}var E=i/s.find("li").length;s.find("li").css({width:E+"%"}),s.find("li[value="+k(b)+"]").addClass("dd_sltd_")}var F=function(){q.find("li").eq(c-1).addClass("dd_sltd_"),p.find("li").eq(d).addClass("dd_sltd_"),r.find("li[value="+b+"]").addClass("dd_sltd_"),e.years_multiple&&s.find("li[value="+k(b)+"]").addClass("dd_sltd_")},G=function(){p.find(".dd_sl_").animate({scrollLeft:d*i},1200,"swing"),setTimeout(function(){q.find(".dd_sl_").animate({scrollLeft:(c-1)*i},1200,"swing"),setTimeout(function(){r.find(".dd_sl_").animate({scrollLeft:r.find(".dd_sl_ li[value="+b+"]").index()*i},1200,"swing")},200)},400)},H=function(){p.find(".dd_sl_").scrollLeft(d*i),q.find(".dd_sl_").scrollLeft((c-1)*i),r.find(".dd_sl_").scrollLeft(r.find(".dd_sl_ li[value="+b+"]").index()*i)},I=function(){p.find(".dd_sl_").scrollLeft(p.find("li.dd_sltd_").index()*i),q.find(".dd_sl_").scrollLeft(q.find("li.dd_sltd_").index()*i),r.find(".dd_sl_").scrollLeft(r.find("li.dd_sltd_").index()*i)};switch(F(),e.format){case"Y":p.hide(),q.hide();break;case"m":r.hide(),s.hide(),q.hide()}var J=function(){var a=q.find("li.dd_sltd_").attr("value"),b=p.find("li.dd_sltd_").attr("value"),c=r.find("li.dd_sltd_").attr("value"),d=s.find("li.dd_sltd_"),f=r.find("li.dd_sltd_").attr("data-filter");if("true"==f&&"2"==b?(q.find("ul").width(29*i),(30==a||31==a)&&(q.find("li").removeClass("dd_sltd_"),q.find("li[value=29]").addClass("dd_sltd_"))):"true"!=f&&"2"==b?(q.find("ul").width(28*i),(29==a||30==a||31==a)&&(q.find("li").removeClass("dd_sltd_"),q.find("li[value=28]").addClass("dd_sltd_"))):"11"==b||"4"==b||"6"==b||"9"==b?(q.find("ul").width(30*i),31==a&&(q.find("li").removeClass("dd_sltd_"),q.find("li[value=30]").addClass("dd_sltd_"))):q.find("ul").width(31*i),q.find("li").each(function(){var e=$(this).attr("value"),f=new Date(b+"/"+e+"/"+c),g=f.getDay();0==g?$(this).addClass("dd_sunday"):$(this).removeClass("dd_sunday"),$(this).find("em").html(v[g])}),e.years_multiple){var g=d.next("li"),h=d.prev("li");c>=g.attr("value")?(l=g.attr("value"),s.find("li").removeClass("dd_sltd_"),g.addClass("dd_sltd_")):l>c&&(l=h.attr("value"),s.find("li").removeClass("dd_sltd_"),h.addClass("dd_sltd_"))}},K=function(a){f.val(a),n.addClass("dd_fadeout").removeClass("dd_"+e.animation),setTimeout(function(){n.hide().removeClass("dd_fadeout"),m.hide()},300)},L=function(){n.addClass("dd_alert").removeClass("dd_"+e.animation),setTimeout(function(){n.removeClass("dd_alert")},500)};e.years_multiple&&s.find("li").on("click",function(){s.find("li").removeClass("dd_sltd_"),$(this).addClass("dd_sltd_");var a=$(this).attr("value");l=a,r.find(".dd_sl_").stop().animate({scrollLeft:r.find("li[value="+a+"]").index()*i},1200,"swing"),r.find("li").removeClass("dd_sltd_"),r.find("li[value="+a+"]").addClass("dd_sltd_"),J()}),n.find(".dd_sw_").each(function(){var c=$(this).find(".dd_sl_"),d=$(this).find(".dd_nav_"),e=c.find("li.dd_sltd_").index()*i,f=function(){var a=c.scrollLeft();a>=e+i/2&&(e+=i),e-i/2>=a&&(e-=i)};$(this).hover(function(){d.show()},function(){d.hide()}),c.find("ul").width(c.find("li").length*i),c.on("scroll mousemove",function(){f()}),d.click(function(){var a;a=$(this).hasClass("dd_next_")?c.find("li.dd_sltd_").next("li"):c.find("li.dd_sltd_").prev("li"),a.length&&(c.stop().animate({scrollLeft:a.index()*i},200),c.find("li").removeClass("dd_sltd_"),a.addClass("dd_sltd_"),J())}),c.on("touchend",function(){c.stop().animate({scrollLeft:e},200);var a=e/i;c.find("li").removeClass("dd_sltd_"),c.find("li").eq(a).addClass("dd_sltd_"),J()}),c.find("li").click(function(){c.animate({scrollLeft:$(this).index()*i},200),c.find("li").removeClass("dd_sltd_"),$(this).addClass("dd_sltd_")})}),J(),f.click(function(){m.show(),n.css({top:f.offset().top+(f.height()+12),left:f.offset().left+(f.width()/2-i/2)-2}).show().addClass("dd_"+e.animation),f.hasClass("dd_locked")?(f.removeClass("dd_locked"),0!=e.animate_current?G():H()):I()}),o.click(function(){n.addClass("dd_fadeout").removeClass("dd_"+e.animation),setTimeout(function(){n.hide().removeClass("dd_fadeout"),m.hide()},300)}),t.click(function(){var a=q.find("li.dd_sltd_").attr("value"),f=p.find("li.dd_sltd_").attr("value"),g=r.find("li.dd_sltd_").attr("value");10>a&&(a="0"+a),10>f&&(f="0"+f);var h=new Date(f+"/"+a+"/"+g);h=h.getDay();var i=a.substr(1),j=v[h].substr(0,3),k=v[h],l=f.substr(1),m=u[l-1].substr(0,3),n=u[l-1],o=e.format.replace(/\b(Y)\b/i,g).replace(/\b(m)\b/i,f).replace(/\b(d)\b/i,a).replace(/\b(D)\b/i,j).replace(/\b(j)\b/i,i).replace(/\b(l)\b/i,k).replace(/\b(F)\b/i,n).replace(/\b(M)\b/i,m).replace(/\b(n)\b/i,l);if(e.lock){var s=c;10>s&&(s="0"+s);var t=d+1;10>t&&(t="0"+t);var w=b,x=Date.parse(w+"-"+t+"-"+s)/1e3,y=Date.parse(g+"-"+f+"-"+a)/1e3;"from"==e.lock?x>y?L():K(o):y>x?L():K(o)}else K(o)})}};
